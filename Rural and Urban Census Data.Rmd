---
title: "Rural and Urban Census Data"
author: "Madison Yonash"
date: "2023-09-27"
output: html_notebook
---

```{r}
library(tidyverse)
```


```{r}
data <- read.table(file = "C:/Users/madis/Documents/pharmacy-misc/Urban Census Data.txt", 
                   sep = "|",
                   header = T,
                   colClasses = "character")
```

```{r}
glimpse(data)
```

```{r}
cageo <- read.table("C:/Users/madis/Documents/pharmacy-misc/cageo2020.pl",
                    sep = "|",
                    header = F,
                    fill = T,
                    colClasses = "character"
                    )
```

```{r}
glimpse(cageo)
```


```{r}
santaclara <- cageo %>% 
  filter(V95 == "CT") %>% 
  select('V2', 'V13', 'V15', 'V87', 'V91') %>% 
  rename('State' = 'V2',
         'StateCode' = 'V13',
         'CountyCode' = 'V15',
         'CTCode' = 'V87',
         'Population' = 'V91'
         ) %>% 
  transform(Population = as.numeric(Population)) %>% 
  unite(GeoID, c('StateCode', 'CountyCode', 'CTCode'), sep = "", remove = FALSE)
santaclara$GeoID <- substr(santaclara$GeoID, 0, 9)
santaclara
```


```{r}
totalPop <- santaclara %>% 
  group_by(GeoID) %>% 
  summarize(Population = sum(Population))
totalPop
```


```{r}
data$GEOID <- substr(data$GEOID, 0, 9)
glimpse(data)
```

```{r}
data <- data%>% 
  transform(X2020_POP = as.numeric(X2020_POP))
```
```{r}
urbanCT <- data  %>% 
  aggregate(X2020_POP~GEOID, FUN=sum) %>% 
  rename('GeoID' = 'GEOID',
         'UrbanPop' = 'X2020_POP'
         )
urbanCT
```


```{r}
mergedDF <- merge(x = totalPop, y = urbanCT, by = "GeoID", all.x=T)
mergedDF
```

```{r}
for (i in 1:nrow(mergedDF)) {
   mergedDF$urbanPercent[i] <- mergedDF$UrbanPop[i] / mergedDF$Population[i]
}

mergedDF
```
```{r}
cageo %>% 
  filter()
```



```{r}
testdata <- data %>% 
  filter(STATE == "06",
         COUNTY == "085",
         TRACT == "512100"
           )

sum(testdata$X2020_POP) 
```

```{r}
testcageo <- cageo %>% 
  filter(V13 == "06",
         V15 == "085",
         V87 == "5121",
         V95 == "CT") %>% 
  transform(V91 = as.numeric(V91)) %>% 
  select('V2', 'V13', 'V15', 'V87', 'V91')
sum(testcageo$V91)
```
```{r}

```

